<?php
global $REGISTRY;

####################################################
# Path
####################################################
$REGISTRY->path->base = realpath(dirname(dirname(dirname(__FILE__))));

####################################################
# Application
####################################################
$REGISTRY->app->disable_route_urldecode = <%= @disable_route_urldecode %>
# Show exception stack trace and request variable.
$REGISTRY->app->debug_mode = <%= @debug_mode_enabled %>;
# Web application contact email.
$REGISTRY->app->contact_email = '<%= @email_contact_account %>';
# Web application sender email
$REGISTRY->app->sender_email = '<%= @email_sender_account %>';
# Vibrant Software contact email.
$REGISTRY->app->vibrant_email = 'vibrant-sysadmin@vibrant-software.com';
# Email exception to $REGISTRY->app->vibrant_email
$REGISTRY->app->email_exceptions = TRUE;
$REGISTRY->app->domain_name = '<%= @domain %>';
$REGISTRY->app->site_asset_url = 'http://<%= @cdn_site_url %>';
$REGISTRY->app->user_asset_url = 'http://<%= @cdn_user_url %>';

$REGISTRY->app->force_https = FALSE;
$REGISTRY->app->force_no_www = FALSE;
$REGISTRY->app->is_beta = TRUE; # is the app in beta mode?
$REGISTRY->app->accept_beta_key = TRUE; # accept beta key?
$REGISTRY->app->hide_featured = FALSE;
$REGISTRY->app->incorrect_login_threshold = 5;
$REGISTRY->app->google_analytics_acct = '<%= @google_analytics_account %>';
$REGISTRY->app->allow_coupons = <%=  @allow_coupons_enabled %>;
$REGISTRY->app->disable_unity = FALSE;

####################################################
# Memcached
####################################################
$REGISTRY->memcached->enabled = <%= @memcache_enabled %>;
$REGISTRY->memcached->servers = array('<%= @memcache_hostname %>.<%= @domain %>:<%= @memcache_port %>');
$REGISTRY->memcached->default_expiry = 3600;    // seconds
$REGISTRY->memcached->enable_logging = FALSE;   // turn off when done testing

####################################################
# Portal API
####################################################
$REGISTRY->app->enable_portal_api = TRUE;
$REGISTRY->app->portal_api_logging = <%= @api_logging_enabled %>;
$REGISTRY->app->skip_api_signature = TRUE;
$REGISTRY->app->api_access_key = '';

####################################################
# Sign Up
####################################################
$REGISTRY->signup->require_email_verification = FALSE;
$REGISTRY->account->require_email_verification = TRUE;
$REGISTRY->account->require_beta_key_to_launch_game = <%= @game_require_beta_key %>;
$REGISTRY->account->require_nda_to_launch_game = TRUE;

####################################################
# SMTP
####################################################
$REGISTRY->smtp->enable = FALSE;
$REGISTRY->smtp->ssl = 'ssl';
$REGISTRY->smtp->auth = 'login';
$REGISTRY->smtp->username = '<%= @email_smtp_account %>';
$REGISTRY->smtp->password = '<%= @email_smtp_password %>';
$REGISTRY->smtp->port = 465;
$REGISTRY->smtp->server = 'smtp.gmail.com';
        
####################################################
# Database
####################################################
$REGISTRY->db->default->host = '<%= @db_fqdn %>';
$REGISTRY->db->default->dbname = '<%= @db_schema_name %>';
$REGISTRY->db->default->username = '<%= @db_user %>';
$REGISTRY->db->default->password = '<%= @db_password %>';

####################################################
# Unity Game
####################################################
$REGISTRY->game->api_endpoint = 'http://<%= @game_hostname %>.<%= @domain %>'; // set to empty to disable API calls
$REGISTRY->game->log_api = true;
$REGISTRY->game->shared_secret = '<%= @game_shared_secret %>';
$REGISTRY->game->client_url = 'http://<%= @game_client_url %>';
$REGISTRY->game->width = 1280;
$REGISTRY->game->height = 720;
$REGISTRY->game->host = "<%= @game_hostname %>.<%= @domain %>";
$REGISTRY->game->port = "<%= @game_port %>";

####################################################
# MailChimp
####################################################
$REGISTRY->mailchimp->api_key = '<%= @mail_chimp_key %>';
$REGISTRY->mailchimp->registration_list_id = '<%= @mail_chimp_reg_id %>';
$REGISTRY->mailchimp->newsletter_list_id = '<%= @mail_chimp_news_id %>';

####################################################
# PlaySpan
####################################################
$REGISTRY->playspan->log_api = true;
$REGISTRY->playspan->enable_test_drivers = false;
$REGISTRY->playspan->enable_upay_lightbox = <%= @playspan_upay_lightbox_enabled %>;
$REGISTRY->playspan->sig_version = '1';
$REGISTRY->playspan->access_id = '<%= @playspan_access_id %>';
$REGISTRY->playspan->store_id = '<%= @playspan_store_id %>';
$REGISTRY->playspan->partner = '<%= @playspan_store_id %>';
$REGISTRY->playspan->vendor = '<%= @playspan_store_id %>';
$REGISTRY->playspan->catalog = '<%= @playspan_catalog %>';
$REGISTRY->playspan->merchant_key = '<%= @playspan_merchant_key %>';
$REGISTRY->playspan->admin_pwd = '<%= @playspan_admin_password %>';
$REGISTRY->playspan->api_url = 'https://<%= @playspan_api_url %>' . $REGISTRY->playspan->store_id . '/';
$REGISTRY->playspan->login_id_prefix = '<%= @playspan_login_id_prefix %>'; // will be prepended to user_id to form the playspan_login_id (use your own concatenating character)
$REGISTRY->playspan->scraps_code = '<%= @playspan_scrap_code %>';
$REGISTRY->playspan->cbills_code = '<%= @playspan_cbills_code %>';
$REGISTRY->playspan->cbills_category_id = 1;
$REGISTRY->playspan->enable_subscriptions = false;
$REGISTRY->playspan->featured_subscription = '<%= @playspan_featured_sub %>';
$REGISTRY->playspan->subscription_product_id_1 = '<%= @playspan_product_subscription_id_1 %>';
$REGISTRY->playspan->subscription_product_id_2 = '<%= @playspan_product_subscription_id_2 %>';
$REGISTRY->playspan->subscription_product_id_3 = '<%= @playspan_product_subscription_id_3 %>';
$REGISTRY->playspan->enable_premiums = false;
$REGISTRY->playspan->enable_boosts = false;

####################################################
# WebPurify
####################################################
$REGISTRY->webpurify->api_key = '<%= @web_purify_key %>';

####################################################
# Zendesk
####################################################
$REGISTRY->zendesk->account = '<%= @zendesk_account_id %>';
$REGISTRY->zendesk->username = '<%= @zendesk_user_account %>';
$REGISTRY->zendesk->password = '<%= @zendesk_user_password %>';
$REGISTRY->zendesk->custom_field_id = '<%= @zendesk_field_id %>';
$REGISTRY->zendesk->custom_field_id_for_portal_user_id = '<%= @zendesk_portal_userfield_id %>';

####################################################
# Amazon Web Services
####################################################
$REGISTRY->amazon->access_key = '<%= @aws_access_key %>';
$REGISTRY->amazon->secret_key = '<%= @aws_secret_key %>';
$REGISTRY->amazon->enable_ses = true;

####################################################
# Invision Power Board
####################################################
$REGISTRY->ipb->create_as_beta_member = FALSE;
$REGISTRY->ipb->beta_member_group_id = 7;

####################################################
# Akamai
####################################################
$REGISTRY->akamai->enabled = true;
$REGISTRY->akamai->ccuapi = 'https://ccuapi.akamai.com/ccuapi-axis.wsdl';
$REGISTRY->akamai->username = '<%= @cdn_asset_user_account %>';
$REGISTRY->akamai->password = '<%= @cdn_asset_user_password %>';
$REGISTRY->akamai->notifications_email = '';
$REGISTRY->akamai->log_api = <%= @cdn_log_api_enabled %>;
$REGISTRY->akamai->net_storage_host = '<%= @cdn_storage_fqdn %>';
$REGISTRY->akamai->net_storage_username = '<%= @cdn_storage_user_account %>';
$REGISTRY->akamai->net_storage_password = '<%= @cdn_storage_user_password %>';
$REGISTRY->akamai->net_storage_base_dir = '<%= @cdn_storage_base_folder %>';
$REGISTRY->akamai->net_purge_empty_dirs = true; // on file delete, purge empty directories recursively

####################################################
# Session Config
####################################################
$REGISTRY->session->name = 'MWTSESSID';
$REGISTRY->session->inactive_lifetime = 60 * 60 * 4; # 4 hrs
$REGISTRY->session->remember_me_cookie_lifetime = 60 * 60 * 24 * 14; # 14 days

####################################################
# Admin Config
####################################################
$REGISTRY->admin->disable_grant_offer = <%= @grant_offer_disabled %>;

# optional. bootstrap file will look for $REGISTRY->db->readOnly->host.
# if set, $REGISTRY->db->readOnly->adapter will be configured with the settings provided
# if not set, $REGISTRY->db->readOnly->adapter = $REGISTRY->db->default->adapter
$REGISTRY->db->readOnly->adapter = $REGISTRY->db->default->adapter;
